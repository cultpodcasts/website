@if (episode) {
<section id="results" class="episodePage">
  <mat-card class="result">
    <mat-card-header>
      @if (authRoles.includes('Curator')) {
      <button mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="edit(episode.id)">
          <mat-icon>edit</mat-icon>
          <span>Edit Episode</span>
        </button>
        <button mat-menu-item (click)="post(episode.id)">
          <mat-icon>send</mat-icon>
          <span>Post Episode</span>
        </button>
      </mat-menu>
      }
      <mat-card-title>
        <span [outerHTML]="episode.episodeTitle"></span>
      </mat-card-title>
      <mat-card-subtitle>
        <a [routerLink]="['/podcast', podcastName]">
          {{podcastName}}
        </a>
      </mat-card-subtitle>
      <mat-card-subtitle>{{episode.release | date:'d MMM yyyy'}}
        [{{episode.duration.split(".")[0].substring(1)}}]</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content class="resultdescription">
      @if (episode.image) {
        <img src="{{episode.image}}" >
      }
      <p>{{episode.episodeDescription}}</p>
    </mat-card-content>
    <mat-card-actions>
      <a *ngIf="episode.youtube" href="{{episode.youtube}}" mat-icon-button>
        <mat-icon svgIcon="youtube"></mat-icon>
      </a>
      <a *ngIf="episode.spotify" href="{{episode.spotify}}" mat-icon-button>
        <mat-icon svgIcon="spotify"></mat-icon>
      </a>
      <a *ngIf="episode.apple" href="{{episode.apple}}" mat-icon-button>
        <mat-icon svgIcon="apple-podcasts"></mat-icon>
      </a>
      <button mat-icon-button (click)="share(episode)">
        <mat-icon>share</mat-icon>
      </button>
      <mat-card-footer class="subjects">
        <div *ngFor="let subject of episode.subjects" class="subject">
          @if (!subject.startsWith("_")) {
          <a [routerLink]="['/subject', subject]">{{subject}}</a>
          }
        </div>
      </mat-card-footer>
    </mat-card-actions>
  </mat-card>
</section>
} @else if (!isLoading) {
<section id="resultsheading">
  <h2>Episode not found.</h2>
</section>
<section>
  <div id="cta-button">
    <button mat-flat-button color="primary" (click)="podcastPage()">Try the Podcast's page!</button>
  </div>
</section>
}